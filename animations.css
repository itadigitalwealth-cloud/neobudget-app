/* ============================================================
   iOS PRO MAX MOTION — versione che si vede DAVVERO
============================================================ */

/* Curves */
:root {
  --spring: cubic-bezier(.21,1.02,.73,1);
  --spring-hard: cubic-bezier(.13,1.4,.43,1);
  --ease: cubic-bezier(.25,.46,.45,.94);
}

/* ============================================================
   1. PAGE TRANSITION — slide depth iOS
============================================================ */

.app-view {
  opacity: 0;
  transform: translateY(40px) scale(.94);
  animation: pageIn .55s var(--spring) forwards;
}

@keyframes pageIn {
  0% {
    opacity: 0;
    transform: translateY(40px) scale(.94);
    filter: blur(22px);
  }
  70% {
    filter: blur(0);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* ============================================================
   2. CARD FLOATING + PARALLAX LIGHT
============================================================ */

.panel,
.kpi-card,
.summary-item {
  position: relative;
  overflow: hidden;
  transform: translateY(14px) scale(.97);
  opacity: 0;
  animation: cardIn .6s var(--spring) forwards;
}

@keyframes cardIn {
  0%   { opacity: 0; transform: translateY(30px) scale(.92); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}

/* Shine effect */
.panel::before,
.kpi-card::before,
.summary-item::before {
  content: "";
  position: absolute;
  top: -200%;
  left: -50%;
  width: 200%;
  height: 300%;
  background: linear-gradient(
    135deg,
    transparent 0%,
    rgba(255,255,255,0.12) 50%,
    transparent 100%
  );
  transform: rotate(12deg);
  animation: shineMove 3.4s ease-in-out infinite;
  pointer-events: none;
}

@keyframes shineMove {
  0%   { transform: translateX(-60%) rotate(10deg); opacity: .0; }
  30%  { opacity: .45; }
  100% { transform: translateX(60%) rotate(10deg); opacity: 0; }
}

/* ============================================================
   3. NAV ICON GLOW — iOS dock style
============================================================ */

.nav-item.active .nav-icon {
  animation: navGlow .8s var(--spring-hard);
  filter: drop-shadow(0 0 10px rgba(150,170,255,0.85));
}

@keyframes navGlow {
  0%   { transform: scale(.6); opacity: .3; }
  60%  { transform: scale(1.35); opacity: 1; }
  100% { transform: scale(1); opacity: 1; }
}

/* ============================================================
   4. BUTTON TAP — deep ripple 3D
============================================================ */

button:active::after,
.nav-item:active::after,
.tab:active::after {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(circle, rgba(255,255,255,.35), transparent 55%);
  animation: deepTap .45s var(--ease);
}





/* ============================================================
   6. FORM COLLAPSE — elastic drop
============================================================ */

.form-collapse {
  overflow: hidden;
  transition:
    max-height .6s var(--spring),
    opacity .35s var(--ease),
    transform .55s var(--spring);
}

.form-collapse.open {
  max-height: 900px;
  opacity: 1;
  transform: scaleY(1);
}

.form-collapse.closed {
  max-height: 0;
  opacity: 0;
  transform: scaleY(.7);
}

/* ============================================================
   7. STACKED ENTRY — elementi uno dopo l’altro
============================================================ */

.float-seq > * {
  opacity: 0;
  animation: seqIn .6s var(--spring) forwards;
}

.float-seq > *:nth-child(1) { animation-delay: .05s; }
.float-seq > *:nth-child(2) { animation-delay: .12s; }
.float-seq > *:nth-child(3) { animation-delay: .18s; }
.float-seq > *:nth-child(4) { animation-delay: .24s; }
.float-seq > *:nth-child(5) { animation-delay: .30s; }

@keyframes seqIn {
  0%   { opacity: 0; transform: translateY(26px) scale(.92); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}


.kpi-card {
  transform: translateY(0);
  transition: transform .25s cubic-bezier(.16,1,.3,1), background .3s;
  backdrop-filter: blur(10px);
}

.kpi-card:active {
  transform: scale(.97);
}

.kpi-card.appear {
  animation: fadeSlideUp .6s ease forwards;
  opacity: 0;
}

@keyframes fadeSlideUp {
  0% {opacity: 0; transform: translateY(10px);}
  100% {opacity: 1; transform: translateY(0);}
}
