<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>NeoBudget - Bilancio Personale</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <div class="app-shell">
    <header class="app-header">
      <div class="brand">
        <div class="brand-logo">NB</div>
        <div class="brand-text">
          <h1>NeoBudget</h1>
          <span>Bilancio personale, ma bello.</span>
        </div>
      </div>
      <div class="header-controls">
        <label class="date-filter-label">
          <span>Data di riferimento</span>
          <input type="date" id="dateFilter">
        </label>
        <button id="btnToday" class="btn primary">Oggi</button>
      </div>
    </header>

    <section class="kpi-grid">
      <div class="kpi-card">
        <span class="kpi-label">Saldo previsto</span>
        <span class="kpi-value" id="stat-saldo">0,00 €</span>
      </div>
      <div class="kpi-card">
        <span class="kpi-label">Liquidità disponibile</span>
        <span class="kpi-value" id="stat-liquidita">0,00 €</span>
      </div>
      <div class="kpi-card">
        <span class="kpi-label">Importo investito</span>
        <span class="kpi-value" id="stat-investito">0,00 €</span>
      </div>
      <div class="kpi-card">
        <span class="kpi-label">Entrate previste</span>
        <span class="kpi-value" id="stat-entrate-previste">0,00 €</span>
      </div>
      <div class="kpi-card">
        <span class="kpi-label">Spese previste</span>
        <span class="kpi-value" id="stat-spese-previste">0,00 €</span>
      </div>
      <div class="kpi-card">
        <span class="kpi-label">Totale complessivo</span>
        <span class="kpi-value" id="stat-totale">0,00 €</span>
      </div>
    </section>

   <section class="summary-grid">
  <h2 class="summary-title">Resoconto per categoria</h2>
  <div id="summary-list" class="summary-list"></div>
</section>



    <main class="app-main">
      <aside class="sidebar">
        <section class="panel">
          <h2>Nuovo movimento</h2>
          <form id="mov-form" autocomplete="off">
            <div class="field-group">
              <label>Tipo</label>
              <div class="field-row">
                <label class="chip">
                  <input type="radio" name="mov-type" value="income" checked>
                  <span>Entrata</span>
                </label>
                <label class="chip">
                  <input type="radio" name="mov-type" value="expense">
                  <span>Uscita</span>
                </label>
              </div>
            </div>

            <div class="field-group">
              <label>Conto</label>
              <select id="mov-account">
                <option value="liquid">Liquidità</option>
                <option value="invested">Investito</option>
              </select>
            </div>

            <div class="field-group">
              <label>Categoria</label>
              <input type="text" id="mov-category" placeholder="Es. Stipendio, Affitto...">
            </div>

            <div class="field-row">
              <div class="field-group half">
                <label>Importo</label>
                <input type="number" id="mov-amount" min="0" step="0.01" placeholder="0.00">
              </div>
              <div class="field-group half">
                <label>Data</label>
                <input type="date" id="mov-date">
              </div>
            </div>

            <div class="field-group">
              <label>Note</label>
              <input type="text" id="mov-note" placeholder="Opzionale">
            </div>

            <div class="form-actions">
              <button type="submit" id="mov-submit" class="btn primary full-width">
                Aggiungi movimento
              </button>
              <button type="button" id="mov-cancel" class="btn ghost full-width hidden">
                Annulla modifica
              </button>
            </div>
          </form>
        </section>

        <section class="panel">
          <h2>Dati & backup</h2>
          <div class="field-group">
            <button id="btnExport" class="btn full-width">Esporta JSON</button>
          </div>
          <div class="field-group">
            <button id="btnImport" class="btn full-width">Importa JSON</button>
            <input type="file" id="fileImport" accept="application/json" class="hidden">
          </div>
          <div class="field-group">
            <button id="btnReset" class="btn danger full-width">Reset completo</button>
          </div>
        </section>
      </aside>

      <section class="content">
        <nav class="tabs">
          <button class="tab active" data-tab="movimenti">Movimenti</button>
          <button class="tab" data-tab="entrate">Entrate ricorrenti</button>
          <button class="tab" data-tab="spese">Spese ricorrenti</button>
        </nav>

        <section class="tab-content active" id="tab-movimenti">
          <div class="table-wrapper">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Data</th>
                  <th>Tipo</th>
                  <th>Conto</th>
                  <th>Categoria</th>
                  <th>Note</th>
                  <th class="align-right">Importo</th>
                  <th class="align-center">Azioni</th>
                </tr>
              </thead>
              <tbody id="mov-list">
                <!-- Movimenti -->
              </tbody>
            </table>
          </div>
        </section>

        <section class="tab-content" id="tab-entrate">
          <div class="panel inline-panel">
            <h3>Nuova entrata ricorrente</h3>
            <form id="rec-income-form" autocomplete="off">
              <div class="field-group">
                <label>Nome</label>
                <input type="text" id="rec-income-name" placeholder="Es. Stipendio mensile">
              </div>
              <div class="field-row">
                <div class="field-group half">
                  <label>Importo</label>
                  <input type="number" id="rec-income-amount" min="0" step="0.01">
                </div>
                <div class="field-group half">
                  <label>Conto</label>
                  <select id="rec-income-account">
                    <option value="liquid">Liquidità</option>
                    <option value="invested">Investito</option>
                  </select>
                </div>
              </div>
              <div class="field-group">
                <label>Categoria</label>
                <input type="text" id="rec-income-category" placeholder="Es. Stipendio">
              </div>
              <div class="field-row">
                <div class="field-group half">
                  <label>Dal</label>
                  <input type="date" id="rec-income-start">
                </div>
                <div class="field-group half">
                  <label>Fino al (opzionale)</label>
                  <input type="date" id="rec-income-end">
                </div>
              </div>

              <div class="field-group">
                <label>Tipo di ricorrenza</label>
                <select id="rec-income-mode">
                  <option value="monthly">Mensile</option>
                  <option value="daily">Ogni giorno</option>
                  <option value="everyXDays">Ogni X giorni</option>
                  <option value="weekly">Ogni X settimane</option>
                  <option value="weeklySpecific">Giorni specifici della settimana</option>
                  <option value="everyXMonths">Ogni X mesi</option>
                  <option value="yearly">Annuale</option>
                </select>
              </div>

              <div class="field-row rec-interval-row" id="rec-income-interval-row">
                <div class="field-group half">
                  <label>Intervallo</label>
                  <input type="number" id="rec-income-interval" min="1" value="1">
                </div>
              </div>

              <div class="field-group rec-weekdays-row hidden" id="rec-income-weekdays-row">
                <label>Giorni della settimana</label>
                <div class="weekday-group" id="rec-income-weekdays">
                  <label class="weekday-chip">
                    <input type="checkbox" value="1">L
                  </label>
                  <label class="weekday-chip">
                    <input type="checkbox" value="2">M
                  </label>
                  <label class="weekday-chip">
                    <input type="checkbox" value="3">M
                  </label>
                  <label class="weekday-chip">
                    <input type="checkbox" value="4">G
                  </label>
                  <label class="weekday-chip">
                    <input type="checkbox" value="5">V
                  </label>
                  <label class="weekday-chip">
                    <input type="checkbox" value="6">S
                  </label>
                  <label class="weekday-chip">
                    <input type="checkbox" value="7">D
                  </label>
                </div>
              </div>

              <div class="form-actions">
                <button type="submit" id="rec-income-submit" class="btn primary full-width">
                  Aggiungi entrata ricorrente
                </button>
                <button type="button" id="rec-income-cancel" class="btn ghost full-width hidden">
                  Annulla modifica
                </button>
              </div>
            </form>
          </div>

          <div class="table-wrapper">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Nome</th>
                  <th>Categoria</th>
                  <th>Ricorrenza</th>
                  <th>Dal</th>
                  <th>Al</th>
                  <th>Conto</th>
                  <th class="align-right">Importo</th>
                  <th class="align-center">Azioni</th>
                </tr>
              </thead>
              <tbody id="rec-income-list">
                <!-- Entrate ricorrenti -->
              </tbody>
            </table>
          </div>
        </section>

        <section class="tab-content" id="tab-spese">
          <div class="panel inline-panel">
            <h3>Nuova spesa ricorrente</h3>
            <form id="rec-expense-form" autocomplete="off">
              <div class="field-group">
                <label>Nome</label>
                <input type="text" id="rec-expense-name" placeholder="Es. Affitto, Abbonamento...">
              </div>
              <div class="field-row">
                <div class="field-group half">
                  <label>Importo</label>
                  <input type="number" id="rec-expense-amount" min="0" step="0.01">
                </div>
                <div class="field-group half">
                  <label>Conto</label>
                  <select id="rec-expense-account">
                    <option value="liquid">Liquidità</option>
                    <option value="invested">Investito</option>
                  </select>
                </div>
              </div>
              <div class="field-group">
                <label>Categoria</label>
                <input type="text" id="rec-expense-category" placeholder="Es. Affitto, Bollette">
              </div>
              <div class="field-row">
                <div class="field-group half">
                  <label>Dal</label>
                  <input type="date" id="rec-expense-start">
                </div>
                <div class="field-group half">
                  <label>Fino al (opzionale)</label>
                  <input type="date" id="rec-expense-end">
                </div>
              </div>

              <div class="field-group">
                <label>Tipo di ricorrenza</label>
                <select id="rec-expense-mode">
                  <option value="monthly">Mensile</option>
                  <option value="daily">Ogni giorno</option>
                  <option value="everyXDays">Ogni X giorni</option>
                  <option value="weekly">Ogni X settimane</option>
                  <option value="weeklySpecific">Giorni specifici della settimana</option>
                  <option value="everyXMonths">Ogni X mesi</option>
                  <option value="yearly">Annuale</option>
                </select>
              </div>

              <div class="field-row rec-interval-row" id="rec-expense-interval-row">
                <div class="field-group half">
                  <label>Intervallo</label>
                  <input type="number" id="rec-expense-interval" min="1" value="1">
                </div>
              </div>

              <div class="field-group rec-weekdays-row hidden" id="rec-expense-weekdays-row">
                <label>Giorni della settimana</label>
                <div class="weekday-group" id="rec-expense-weekdays">
                  <label class="weekday-chip">
                    <input type="checkbox" value="1">L
                  </label>
                  <label class="weekday-chip">
                    <input type="checkbox" value="2">M
                  </label>
                  <label class="weekday-chip">
                    <input type="checkbox" value="3">M
                  </label>
                  <label class="weekday-chip">
                    <input type="checkbox" value="4">G
                  </label>
                  <label class="weekday-chip">
                    <input type="checkbox" value="5">V
                  </label>
                  <label class="weekday-chip">
                    <input type="checkbox" value="6">S
                  </label>
                  <label class="weekday-chip">
                    <input type="checkbox" value="7">D
                  </label>
                </div>
              </div>

              <div class="form-actions">
                <button type="submit" id="rec-expense-submit" class="btn primary full-width">
                  Aggiungi spesa ricorrente
                </button>
                <button type="button" id="rec-expense-cancel" class="btn ghost full-width hidden">
                  Annulla modifica
                </button>
              </div>
            </form>
          </div>

          <div class="table-wrapper">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Nome</th>
                  <th>Categoria</th>
                  <th>Ricorrenza</th>
                  <th>Dal</th>
                  <th>Al</th>
                  <th>Conto</th>
                  <th class="align-right">Importo</th>
                  <th class="align-center">Azioni</th>
                </tr>
              </thead>
              <tbody id="rec-expense-list">
                <!-- Spese ricorrenti -->
              </tbody>
            </table>
          </div>
        </section>
      </section>
    </main>
  </div>

  <style>
  /* =========================================================
   NEO BUDGET – VISION OS / DYNAMIC ISLAND STYLE
   Mobile-first • iOS futuristico • vetro + glow soft
========================================================= */

/* ---------------------------
   RESET BASE
---------------------------- */
*,
*::before,
*::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

html {
  scroll-behavior: smooth;
  text-size-adjust: 100%;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Inter", sans-serif;
  -webkit-font-smoothing: antialiased;
  background-color: #020309;
  color: #f5f6ff;
}

/* ---------------------------
   DESIGN TOKENS
---------------------------- */
:root {
  /* Background layers */
  --bg-root: radial-gradient(circle at top, #151739 0, #050618 42%, #010109 100%);
  --bg-glass: rgba(8, 10, 28, 0.90);
  --bg-glass-soft: rgba(9, 11, 32, 0.80);
  --bg-glass-subtle: rgba(11, 13, 40, 0.68);
  --bg-chip: rgba(16, 20, 55, 0.96);
  --bg-chip-soft: rgba(21, 26, 66, 0.9);

  /* Borders */
  --border-subtle: rgba(255, 255, 255, 0.04);
  --border-soft: rgba(255, 255, 255, 0.09);
  --border-strong: rgba(255, 255, 255, 0.16);

  /* Accents */
  --accent: #7f8dff;
  --accent-strong: #c1c5ff;
  --accent-soft: rgba(127, 141, 255, 0.45);
  --accent-glow: rgba(111, 132, 255, 0.9);

  /* Semantic */
  --success: #65f0c0;
  --success-soft: rgba(101, 240, 192, 0.16);
  --danger: #ff6a93;
  --danger-soft: rgba(255, 106, 147, 0.16);
  --warning: #ffd56b;

  /* Text */
  --text-main: #f5f6ff;
  --text-muted: #a4a7c7;
  --text-soft: #7c81aa;
  --text-subtle: #5f6489;

  /* Radius */
  --radius-xs: 8px;
  --radius-sm: 12px;
  --radius-md: 16px;
  --radius-lg: 20px;
  --radius-xl: 26px;
  --radius-2xl: 32px;
  --radius-pill: 999px;

  /* Shadow / depth */
  --shadow-soft: 0 14px 32px rgba(0, 0, 0, 0.65);
  --shadow-strong: 0 24px 60px rgba(0, 0, 0, 0.82);
  --shadow-floating: 0 18px 50px rgba(6, 9, 40, 0.95);

  /* Blur */
  --blur-soft: 18px;
  --blur-strong: 26px;

  /* Spacing */
  --space-2: 2px;
  --space-4: 4px;
  --space-6: 6px;
  --space-8: 8px;
  --space-10: 10px;
  --space-12: 12px;
  --space-14: 14px;
  --space-16: 16px;
  --space-18: 18px;
  --space-20: 20px;
  --space-24: 24px;
  --space-28: 28px;
  --space-32: 32px;

  /* Typography */
  --fs-2xs: 10px;
  --fs-xs: 11px;
  --fs-sm: 13px;
  --fs-md: 14px;
  --fs-lg: 16px;
  --fs-xl: 20px;
  --fs-2xl: 24px;

  /* Timing */
  --anim-fast: 0.15s ease-out;
  --anim-med: 0.22s ease-out;
  --anim-slow: 0.3s ease-out;
}

/* ---------------------------
   BODY / ROOT BACKGROUND
---------------------------- */

body {
  background-image:
    radial-gradient(circle at -10% -10%, rgba(139, 99, 255, 0.45), transparent 55%),
    radial-gradient(circle at 110% 0, rgba(76, 225, 209, 0.26), transparent 55%),
    var(--bg-root);
  background-attachment: fixed;
  color: var(--text-main);
}

/* ---------------------------
   APP SHELL
---------------------------- */

.app-shell {
  min-height: 100vh;
  width: 100%;
  max-width: 520px;
  margin: 0 auto;
  padding: var(--space-16) var(--space-12) var(--space-24);
  display: flex;
  flex-direction: column;
  gap: var(--space-18);
}

/* ---------------------------
   HEADER – stile Dynamic Island card
---------------------------- */

.app-header {
  position: relative;
  padding: var(--space-16) var(--space-18);
  border-radius: var(--radius-2xl);
  background:
    radial-gradient(circle at 0 0, rgba(255, 255, 255, 0.06), transparent 55%),
    radial-gradient(circle at 100% 0, rgba(127, 141, 255, 0.20), transparent 56%),
    var(--bg-glass);
  border: 1px solid rgba(196, 199, 255, 0.18);
  box-shadow: var(--shadow-floating);
  backdrop-filter: blur(var(--blur-soft));
  display: flex;
  flex-direction: column;
  gap: var(--space-14);
  overflow: hidden;
}

.app-header::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 10% 10%, rgba(255, 255, 255, 0.18), transparent 40%),
    radial-gradient(circle at 85% -10%, rgba(123, 92, 255, 0.3), transparent 60%);
  opacity: 0.4;
  pointer-events: none;
}

.app-header::after {
  content: "";
  position: absolute;
  inset: 10px 18%;
  border-radius: 999px;
  background: radial-gradient(circle at 50% 20%, rgba(0, 0, 0, 0.85), transparent 60%);
  mix-blend-mode: soft-light;
  opacity: 0.7;
  pointer-events: none;
}

.app-header > * {
  position: relative;
  z-index: 1;
}

/* Brand */

.brand {
  display: flex;
  align-items: center;
  gap: var(--space-10);
}

.brand-logo {
  width: 42px;
  height: 42px;
  border-radius: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--fs-md);
  font-weight: 700;
  color: #fff;
  background:
    radial-gradient(circle at 20% 0, rgba(255, 255, 255, 0.9), transparent 50%),
    radial-gradient(circle at 0 100%, #7f8dff, #2d3566);
  box-shadow:
    0 10px 28px rgba(0, 0, 0, 0.7),
    0 0 40px rgba(127, 141, 255, 0.8);
}

.brand-text h1 {
  font-size: var(--fs-xl);
  font-weight: 600;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.brand-text span {
  font-size: var(--fs-xs);
  color: var(--text-soft);
}

/* Header controls */

.header-controls {
  display: flex;
  flex-direction: column;
  gap: var(--space-8);
}

.date-filter-label {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
  font-size: var(--fs-xs);
  color: var(--text-muted);
}

.date-filter-label input[type="date"] {
  appearance: none;
  -webkit-appearance: none;
  padding: var(--space-8) var(--space-12);
  border-radius: var(--radius-pill);
  border: 1px solid rgba(214, 216, 255, 0.4);
  background:
    radial-gradient(circle at 0 0, rgba(255, 255, 255, 0.12), transparent 52%),
    rgba(2, 4, 18, 0.92);
  color: var(--text-main);
  font-size: var(--fs-sm);
  font-weight: 500;
  outline: none;
  box-shadow: 0 0 0 1px rgba(65, 74, 150, 0.5);
  backdrop-filter: blur(18px);
  transition:
    border-color var(--anim-fast),
    box-shadow var(--anim-fast),
    background var(--anim-fast),
    transform var(--anim-fast);
}

.date-filter-label input[type="date"]:focus {
  border-color: var(--accent);
  box-shadow:
    0 0 0 1px var(--accent-soft),
    0 0 24px rgba(113, 135, 255, 0.7);
  transform: translateY(-0.5px);
}

.date-filter-label input[type="date"]::-webkit-calendar-picker-indicator {
  filter: invert(1) opacity(0.7);
}

/* --------------------------------
   BUTTONS – VisionOS style
--------------------------------- */

.btn {
  border-radius: var(--radius-pill);
  border: 1px solid rgba(255, 255, 255, 0.22);
  background: rgba(5, 7, 20, 0.92);
  color: var(--text-main);
  font-size: var(--fs-sm);
  padding: var(--space-8) var(--space-16);
  cursor: pointer;
  outline: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-6);
  width: auto;
  transition:
    transform var(--anim-fast),
    box-shadow var(--anim-fast),
    border-color var(--anim-fast),
    background var(--anim-fast),
    opacity var(--anim-fast);
  backdrop-filter: blur(var(--blur-soft));
}

.btn.primary {
  background: radial-gradient(circle at 0 0, #ffffff, transparent 60%),
    linear-gradient(135deg, #7c86ff, #b7c1ff);
  border-color: transparent;
  color: #050612;
  box-shadow:
    0 14px 32px rgba(84, 99, 255, 0.8),
    0 0 1px rgba(255, 255, 255, 0.7);
}

.btn.danger {
  background: radial-gradient(circle at 0 0, #ffe7f0, transparent 60%),
    linear-gradient(135deg, #ff6a93, #ff9bb4);
  border-color: transparent;
  color: #190309;
  box-shadow:
    0 14px 32px rgba(255, 106, 147, 0.8),
    0 0 1px rgba(255, 255, 255, 0.6);
}

.btn.ghost {
  background: rgba(9, 11, 30, 0.7);
  border-style: dashed;
  border-color: rgba(205, 209, 255, 0.45);
}

.btn.full-width {
  width: 100%;
}

.btn:hover {
  transform: translateY(-1px);
  box-shadow:
    0 16px 40px rgba(0, 0, 0, 0.75),
    0 0 24px rgba(127, 141, 255, 0.8);
}

.btn:active {
  transform: translateY(0);
  box-shadow:
    0 10px 24px rgba(0, 0, 0, 0.8),
    0 0 16px rgba(127, 141, 255, 0.7);
}

/* ---------------------------
   KPI GRID – Vision widget
---------------------------- */

.kpi-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-10);
}

.kpi-card {
  position: relative;
  padding: var(--space-12) var(--space-14);
  border-radius: var(--radius-xl);
  background:
    radial-gradient(circle at top left, rgba(140, 152, 255, 0.25), transparent 65%),
    radial-gradient(circle at bottom right, rgba(87, 255, 210, 0.16), transparent 68%),
    rgba(5, 7, 22, 0.96);
  border: 1px solid rgba(209, 213, 255, 0.28);
  backdrop-filter: blur(var(--blur-soft));
  box-shadow: var(--shadow-soft);
  overflow: hidden;
}

.kpi-card::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 15% 0, rgba(255, 255, 255, 0.16), transparent 55%),
    radial-gradient(circle at 80% 100%, rgba(97, 255, 214, 0.18), transparent 60%);
  mix-blend-mode: screen;
  opacity: 0.85;
  pointer-events: none;
}

.kpi-label {
  position: relative;
  z-index: 1;
  font-size: var(--fs-xs);
  color: var(--text-soft);
  text-transform: uppercase;
  letter-spacing: 0.13em;
}

.kpi-value {
  position: relative;
  z-index: 1;
  display: block;
  margin-top: var(--space-4);
  font-size: var(--fs-xl);
  font-weight: 600;
}

/* ---------------------------
   SUMMARY – per categoria
---------------------------- */

.summary-grid {
  margin-top: var(--space-12);
  padding: var(--space-14) var(--space-14) var(--space-16);
  border-radius: var(--radius-2xl);
  background:
    linear-gradient(135deg, rgba(11, 13, 40, 0.96), rgba(3, 4, 18, 0.98));
  border: 1px solid rgba(211, 215, 255, 0.18);
  box-shadow: var(--shadow-soft);
  backdrop-filter: blur(var(--blur-soft));
}

.summary-title {
  margin-bottom: var(--space-10);
  font-size: var(--fs-xs);
  text-transform: uppercase;
  color: var(--text-soft);
  letter-spacing: 0.16em;
}

.summary-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-8);
}

.summary-item {
  padding: var(--space-10) var(--space-14);
  border-radius: var(--radius-lg);
  border: 1px solid rgba(186, 192, 255, 0.25);
  background:
    radial-gradient(circle at 0 0, rgba(149, 159, 255, 0.14), transparent 55%),
    rgba(6, 7, 26, 0.98);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.summary-item span {
  font-size: var(--fs-sm);
}

.summary-amount-pos {
  color: var(--success);
  font-weight: 600;
}

.summary-amount-neg {
  color: var(--danger);
  font-weight: 600;
}

/* ---------------------------
   LAYOUT MAIN
---------------------------- */

.app-main {
  display: flex;
  flex-direction: column;
  gap: var(--space-12);
}

.sidebar {
  display: flex;
  flex-direction: column;
  gap: var(--space-12);
}

.content {
  padding: var(--space-12) var(--space-12) var(--space-14);
  border-radius: var(--radius-2xl);
  background:
    radial-gradient(circle at top right, rgba(124, 136, 255, 0.20), transparent 60%),
    rgba(6, 8, 30, 0.98);
  border: 1px solid rgba(210, 214, 255, 0.24);
  backdrop-filter: blur(var(--blur-strong));
  box-shadow: var(--shadow-strong);
}

/* ---------------------------
   PANELS / CARD FORM
---------------------------- */

.panel {
  padding: var(--space-14) var(--space-14) var(--space-16);
  border-radius: var(--radius-2xl);
  background:
    radial-gradient(circle at top left, rgba(127, 141, 255, 0.22), transparent 60%),
    rgba(3, 4, 18, 0.98);
  border: 1px solid rgba(207, 212, 255, 0.18);
  box-shadow: var(--shadow-soft);
  backdrop-filter: blur(var(--blur-soft));
}

.inline-panel {
  margin-bottom: var(--space-12);
}

.panel h2,
.panel h3 {
  margin-bottom: var(--space-10);
  font-size: var(--fs-xs);
  text-transform: uppercase;
  letter-spacing: 0.16em;
  color: var(--text-soft);
}

/* ---------------------------
   FORM FIELDS
---------------------------- */

.field-group {
  margin-bottom: var(--space-10);
}

.field-group label {
  display: block;
  font-size: var(--fs-xs);
  margin-bottom: var(--space-4);
  color: var(--text-muted);
}

.field-row {
  display: flex;
  gap: var(--space-8);
}

.field-group.half {
  flex: 1;
}

input[type="text"],
input[type="number"],
input[type="date"],
select {
  width: 100%;
  padding: var(--space-8) var(--space-12);
  border-radius: var(--radius-pill);
  border: 1px solid rgba(200, 204, 255, 0.35);
  background: linear-gradient(
      145deg,
      rgba(255, 255, 255, 0.12),
      rgba(0, 0, 0, 0.16)
    ),
    rgba(4, 5, 24, 0.96);
  color: var(--text-main);
  font-size: var(--fs-sm);
  outline: none;
  backdrop-filter: blur(18px);
  transition:
    border-color var(--anim-fast),
    box-shadow var(--anim-fast),
    background var(--anim-fast),
    transform var(--anim-fast);
}

input::placeholder {
  color: rgba(155, 160, 210, 0.75);
}

input:focus,
select:focus {
  border-color: var(--accent);
  box-shadow:
    0 0 0 1px var(--accent-soft),
    0 0 22px rgba(123, 139, 255, 0.75);
  transform: translateY(-0.5px);
}

/* Radio chip Entrata/Uscita */

.chip {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-4);
  padding: var(--space-4) var(--space-10);
  border-radius: var(--radius-pill);
  border: 1px solid rgba(202, 208, 255, 0.45);
  background: var(--bg-chip-soft);
  font-size: var(--fs-xs);
  color: var(--text-muted);
  cursor: pointer;
  user-select: none;
  transition:
    background var(--anim-fast),
    border-color var(--anim-fast),
    color var(--anim-fast),
    transform var(--anim-fast),
    box-shadow var(--anim-fast);
}

.chip input {
  display: none;
}

.chip span {
  position: relative;
  top: 1px;
}

.chip input:checked + span,
.chip input:checked ~ span {
  color: #ffffff;
}

.chip input:checked ~ span::after {
  content: "";
  position: absolute;
  left: 50%;
  bottom: -6px;
  width: 14px;
  height: 2px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.7);
  transform: translateX(-50%);
}

.chip:hover {
  transform: translateY(-0.5px);
  border-color: rgba(227, 231, 255, 0.7);
  box-shadow: 0 8px 24px rgba(11, 16, 54, 0.75);
}

/* ---------------------------
   FORM ACTIONS
---------------------------- */

.form-actions {
  display: flex;
  flex-direction: column;
  gap: var(--space-6);
  margin-top: var(--space-6);
}

/* ---------------------------
   TABS – stile segment control
---------------------------- */

.tabs {
  display: inline-flex;
  padding: var(--space-4);
  border-radius: var(--radius-pill);
  background: rgba(4, 6, 24, 0.95);
  border: 1px solid rgba(192, 197, 255, 0.35);
  margin-bottom: var(--space-8);
  backdrop-filter: blur(20px);
}

.tab {
  border: none;
  background: transparent;
  color: var(--text-soft);
  font-size: var(--fs-sm);
  padding: var(--space-6) var(--space-12);
  border-radius: var(--radius-pill);
  cursor: pointer;
  transition:
    background var(--anim-med),
    color var(--anim-med),
    transform var(--anim-fast),
    box-shadow var(--anim-fast);
}

.tab.active {
  background:
    radial-gradient(circle at 0 0, rgba(255, 255, 255, 0.18), transparent 60%),
    linear-gradient(135deg, rgba(127, 141, 255, 0.95), rgba(101, 175, 255, 0.95));
  color: #050814;
  transform: translateY(-1px);
  box-shadow: 0 10px 26px rgba(79, 96, 255, 0.9);
}

.tab-content {
  display: none;
  animation: fadeIn 0.22s ease-out;
}

.tab-content.active {
  display: block;
}

/* ---------------------------
   TABLES – movimenti / ricorrenti
---------------------------- */

.table-wrapper {
  margin-top: var(--space-8);
  border-radius: var(--radius-xl);
  border: 1px solid rgba(204, 208, 255, 0.25);
  overflow: hidden;
  background:
    radial-gradient(circle at top left, rgba(128, 140, 255, 0.22), transparent 58%),
    radial-gradient(circle at bottom right, rgba(84, 255, 208, 0.14), transparent 60%),
    rgba(4, 6, 24, 0.98);
  box-shadow: var(--shadow-soft);
  overflow-x: auto;
}

/* Scrollbar orizzontale */

.table-wrapper::-webkit-scrollbar {
  height: 6px;
}
.table-wrapper::-webkit-scrollbar-track {
  background: transparent;
}
.table-wrapper::-webkit-scrollbar-thumb {
  background: rgba(221, 226, 255, 0.35);
  border-radius: 999px;
}

.data-table {
  width: 100%;
  min-width: 720px;
  border-collapse: collapse;
  font-size: var(--fs-sm);
}

.data-table thead {
  background: rgba(7, 9, 32, 0.98);
}

.data-table th,
.data-table td {
  padding: var(--space-8) var(--space-10);
  border-bottom: 1px solid rgba(192, 197, 255, 0.22);
}

.data-table th {
  font-size: var(--fs-2xs);
  text-transform: uppercase;
  letter-spacing: 0.16em;
  color: var(--text-soft);
  text-align: left;
}

.data-table tbody tr:hover {
  background: rgba(15, 18, 54, 0.97);
}

.align-right {
  text-align: right;
}

.align-center {
  text-align: center;
}

/* Badges */

.badge {
  display: inline-flex;
  align-items: center;
  padding: 2px 8px;
  border-radius: var(--radius-pill);
  font-size: var(--fs-xs);
  border: 1px solid rgba(216, 220, 255, 0.4);
  background: rgba(7, 9, 32, 0.92);
}

.badge-income {
  border-color: rgba(101, 240, 192, 0.7);
  color: #a2fadb;
  background: var(--success-soft);
}

.badge-expense {
  border-color: rgba(255, 106, 147, 0.75);
  color: #ffc4d6;
  background: var(--danger-soft);
}

.badge-liquid {
  border-color: rgba(127, 141, 255, 0.85);
  color: #dce1ff;
}

.badge-invested {
  border-color: rgba(104, 220, 255, 0.85);
  color: #c7f1ff;
}

/* Amount colors */

.amount-positive {
  color: #a2fadb;
}

.amount-negative {
  color: #ffc4d6;
}

/* Icon buttons (edit/delete) */

.icon-btn {
  border: none;
  background: transparent;
  padding: 2px 4px;
  cursor: pointer;
  color: var(--text-soft);
  font-size: 15px;
  transition:
    color var(--anim-fast),
    transform var(--anim-fast),
    text-shadow var(--anim-fast);
}

.icon-btn:hover {
  color: #ffffff;
  transform: translateY(-1px);
  text-shadow: 0 0 10px rgba(255, 255, 255, 0.65);
}

/* ---------------------------
   RICORRENZE – interval & weekdays
---------------------------- */

.rec-interval-row {
  margin-bottom: var(--space-6);
}

.rec-weekdays-row {
  margin-bottom: var(--space-6);
}

.weekday-group {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-6);
}

.weekday-chip {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 30px;
  height: 30px;
  border-radius: var(--radius-pill);
  border: 1px solid rgba(211, 215, 255, 0.6);
  background: rgba(6, 8, 30, 0.96);
  font-size: var(--fs-xs);
  cursor: pointer;
  user-select: none;
  transition:
    background var(--anim-fast),
    border-color var(--anim-fast),
    transform var(--anim-fast),
    box-shadow var(--anim-fast),
    color var(--anim-fast);
  color: var(--text-muted);
}

.weekday-chip input {
  display: none;
}

.weekday-chip:hover {
  transform: translateY(-1px);
  border-color: rgba(231, 236, 255, 0.9);
  box-shadow: 0 10px 22px rgba(10, 13, 40, 0.9);
}

.weekday-chip input:checked + span,
.weekday-chip input:checked ~ span {
  color: #ffffff;
  font-weight: 600;
}

.weekday-chip input:checked ~ span {
  text-shadow: 0 0 12px rgba(127, 141, 255, 0.85);
}

/* ---------------------------
   UTILITIES / ANIMAZIONI
---------------------------- */

.hidden {
  display: none !important;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* =========================================================
   BREAKPOINT SYSTEM – iOS / VisionOS MOBILE-FIRST
   Scomposizione completa per device reali
========================================================= */

/* ---------------------------------------------------------
   iPhone SE (vecchi piccoli) — 320–360px
--------------------------------------------------------- */
@media (max-width: 360px) and (max-height: 740px) {
  .app-shell {
    padding: 10px 10px 22px;
    gap: 14px;
  }

  .kpi-grid {
    grid-template-columns: 1fr;
  }

  .panel,
  .content,
  .summary-grid,
  .app-header {
    border-radius: 18px;
    padding: 12px 14px;
  }

  .brand-logo {
    width: 36px;
    height: 36px;
  }

  input,
  select {
    font-size: 12px;
    padding: 8px 10px;
  }

  .btn {
    padding: 8px 10px;
    font-size: 12px;
  }
}

/* ---------------------------------------------------------
   iPhone 12 mini / 13 mini — 360–390px
--------------------------------------------------------- */
@media (min-width: 361px) and (max-width: 390px) {
  .app-shell {
    max-width: 420px;
    gap: 16px;
  }

  .kpi-grid {
    grid-template-columns: 1fr;
  }

  .app-header {
    border-radius: 22px;
  }

  .tab {
    padding: 6px 10px;
  }
}

/* ---------------------------------------------------------
   iPhone 11 / 12 / 13 / 14 — 390–430px
   (risoluzione standard moderna)
--------------------------------------------------------- */
@media (min-width: 391px) and (max-width: 430px) {
  .app-shell {
    padding: 22px 14px 32px;
    max-width: 480px;
  }

  .kpi-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .panel,
  .content {
    border-radius: 26px;
  }
}

/* ---------------------------------------------------------
   iPhone Pro Max — 430–480px
--------------------------------------------------------- */
@media (min-width: 431px) and (max-width: 480px) {
  .app-shell {
    max-width: 520px;
    padding-top: 24px;
  }

  .kpi-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 14px;
  }

  .summary-grid {
    padding: 20px 22px;
  }

  .panel {
    padding: 18px 22px;
  }
}

/* ---------------------------------------------------------
   Device con altezza ridotta (navigation bar grande / tastiera)
--------------------------------------------------------- */
@media (max-height: 750px) and (orientation: portrait) {
  .app-shell {
    padding-bottom: 12px;
  }
  .content {
    padding-bottom: 10px;
  }
}

/* ---------------------------------------------------------
   Mobile con display “retina” (densità alta)
--------------------------------------------------------- */
@media only screen and (-webkit-min-device-pixel-ratio: 3),
       only screen and (min-resolution: 300dpi) {
  .app-header,
  .panel,
  .content {
    backdrop-filter: blur(22px);
  }

  .btn {
    box-shadow: 0 12px 28px rgba(0,0,0,0.65);
  }
}

/* ---------------------------------------------------------
   Mobile senza hover (telefono vero), ottimizzazioni touch
--------------------------------------------------------- */
@media (hover: none) and (pointer: coarse) {
  .btn:hover,
  .tab:hover {
    transform: none;
    box-shadow: none;
  }

  .icon-btn:hover {
    transform: none;
    text-shadow: none;
  }
}

/* ---------------------------------------------------------
   Tablet verticali — 600–800px
--------------------------------------------------------- */
@media (min-width: 600px) and (max-width: 800px) {
  .kpi-grid {
    grid-template-columns: repeat(3, 1fr);
  }

  .app-main {
    grid-template-columns: 1fr;
  }

  .panel {
    border-radius: 28px;
  }
}

/* ---------------------------------------------------------
   iPad / tablet horizontal — 800–1080px
--------------------------------------------------------- */
@media (min-width: 800px) and (orientation: landscape) {
  .app-main {
    display: grid;
    grid-template-columns: 320px 1fr;
    gap: 22px;
  }

  .sidebar {
    order: 1;
  }
  .content {
    order: 2;
  }
}

/* ---------------------------------------------------------
   Desktop grande (fallback)
--------------------------------------------------------- */
@media (min-width: 1080px) {
  .app-shell {
    max-width: 900px;
    padding-top: 32px;
  }

  .kpi-grid {
    grid-template-columns: repeat(3, 1fr);
  }

  .app-header {
    flex-direction: row;
    justify-content: space-between;
  }
}


  </style>
  <script src="app.js" defer></script>
</body>
</html>
